<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ToDo</title>
  </head>

  <body>
    <header>
      <section class="header__section">
        <div class="header__substrate">
          <div class="container">
            <div class="header__content">
              <h1>To Do list</h1>
              <ul class="header__content__list">
                <li>
                  <p>Scope</p>
                  <p id="scope">0</p>
                </li>
                <li>
                  <p>Active</p>
                  <p id="active">0</p>
                </li>
                <li>
                  <p>Successful</p>
                  <p id="successful">0</p>
                </li>
              </ul>
            </div>
          </div>

          <div onclick="view.openPopupCreate(true)" class="header__btn">
            <span></span>
            <span></span>
          </div>
        </div>
      </section>
    </header>

    <main>
      <section class="main__section">
        <div class="main__substrate">
          <div class="container">
            <div id="tasks" class="main__content"></div>
          </div>
        </div>
      </section>
    </main>

    <footer>
      <button onclick="view.openPopupCreate(true)">
        <h4>Create new task</h4>
      </button>
    </footer>

    <div id="host-input" style="display: none">
      <textarea rows="7" id="edit-task-input" class="textarea__edit"></textarea>
    </div>

    <div class="popup__container" id="popup-delete">
      <div class="popup__content">
        <h2 class="popup__title">Are you sure you want to delete this item?</h2>
        <button onclick="vm.deleteCancel()" class="popup__close"></button>
        <div class="bottom__navigation">
          <button onclick="vm.deleteCancel()">cancel</button>
          <button onclick="vm.confirmDelete()">delete</button>
        </div>
      </div>
    </div>

    <div class="popup__container" id="popup-create">
      <div class="popup__content">
        <h2 class="popup__title">Create new task</h2>
        <button onclick="view.openPopupCreate(false)" class="popup__close"></button>
        <textarea cols="30" rows="7" class="textarea__create" id="create-task-input"></textarea>
        <div class="bottom__navigation">
          <button onclick="view.openPopupCreate(false)">cancel</button>
          <button onclick="vm.confirmCreate()">create</button>
        </div>
      </div>
    </div>

    <script id="task-template" type="text/template">
      {{#tasks}}
        <div id="{{_id}}" class="grid-container">
          <input type="checkbox" {{checked}} onclick="vm.fulfilled('{{_id}}')"/>
          <span class="date">{{formatDate}}</span>
          <div class="task__images">
            <div id="edit-complete-{{_id}}" onclick="vm.editComplete('{{_id}}')" style="display: none;"></div>
          <div id="edit-{{_id}}" onclick="vm.edit('{{_id}}')"></div>
          <div id="delete-{{_id}}" onclick="vm.delete('{{_id}}')"></div>
        </div>

        <div></div>
        <div id="task-input-container-{{_id}}">
          <p class="message">{{message}}</p>
        </div>
        <div></div>
      </div>
      {{/tasks}}
    </script>
  </body>
</html>
